
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Measuring the Overton Window &#8212; ProbablyOverthinkingIt</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Probably Overthinking It" href="README.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">ProbablyOverthinkingIt</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="README.html">
                    Probably Overthinking It
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Measuring the Overton Window
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/AllenDowney/ProbablyOverthinkingIt/master?urlpath=tree/overton_irt.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/AllenDowney/ProbablyOverthinkingIt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/overton_irt.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Measuring the Overton Window
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#imports-and-function-definitions">
   Imports and Function Definitions
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#read-the-data">
   Read the Data
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#quantifying-political-beliefs">
   Quantifying Political Beliefs
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#estimating-conservatism">
   Estimating Conservatism
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Estimating Conservatism
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#array-operations-for-the-win">
   Array Operations For the Win
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conservatism-over-time">
   Conservatism Over Time
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#are-we-polarized">
   Are We Polarized?
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#appendix-the-fifteen-questions">
   Appendix: The Fifteen Questions
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Measuring the Overton Window</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Measuring the Overton Window
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#imports-and-function-definitions">
   Imports and Function Definitions
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#read-the-data">
   Read the Data
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#quantifying-political-beliefs">
   Quantifying Political Beliefs
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#estimating-conservatism">
   Estimating Conservatism
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Estimating Conservatism
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#array-operations-for-the-win">
   Array Operations For the Win
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conservatism-over-time">
   Conservatism Over Time
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#are-we-polarized">
   Are We Polarized?
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#appendix-the-fifteen-questions">
   Appendix: The Fifteen Questions
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="measuring-the-overton-window">
<h1>Measuring the Overton Window<a class="headerlink" href="#measuring-the-overton-window" title="Permalink to this headline">#</a></h1>
<p>One of the chapters in <em>Probably Overthinking It</em> is about the <a class="reference external" href="https://en.wikipedia.org/wiki/Overton_window">Overton window</a>.
While working on that chapter, I used a bit of Bayesian inference that is too technical to explain in the book. So I’ll explain it here.</p>
<p>If you would like to get infrequent email announcements about the book, please <a class="reference external" href="http://eepurl.com/h0nfbX">sign up for my mailing list</a>.</p>
<p><a class="reference external" href="https://colab.research.google.com/github/AllenDowney/ProbablyOverthinkingIt/blob/book/notebooks/overton_irt.ipynb">Click here to run this notebook on Colab</a></p>
</section>
<section id="imports-and-function-definitions">
<h1>Imports and Function Definitions<a class="headerlink" href="#imports-and-function-definitions" title="Permalink to this headline">#</a></h1>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 1;
                var nbb_unformatted_code = "import sys\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%load_ext nb_black";
                var nbb_formatted_code = "import sys\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n%load_ext nb_black";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">statsmodels.nonparametric.smoothers_lowess</span> <span class="kn">import</span> <span class="n">lowess</span>


<span class="k">def</span> <span class="nf">make_lowess</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="n">frac</span><span class="o">=</span><span class="mf">0.7</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Use LOWESS to compute a smooth line.</span>

<span class="sd">    series: pd.Series</span>

<span class="sd">    returns: pd.Series</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">values</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span>

    <span class="n">smooth</span> <span class="o">=</span> <span class="n">lowess</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">frac</span><span class="o">=</span><span class="n">frac</span><span class="p">)</span>
    <span class="n">index</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">smooth</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 2;
                var nbb_unformatted_code = "from statsmodels.nonparametric.smoothers_lowess import lowess\n\n\ndef make_lowess(series, frac=0.7):\n    \"\"\"Use LOWESS to compute a smooth line.\n\n    series: pd.Series\n\n    returns: pd.Series\n    \"\"\"\n    y = series.values\n    x = series.index.values\n\n    smooth = lowess(y, x, frac=frac)\n    index, data = np.transpose(smooth)\n\n    return pd.Series(data, index=index)";
                var nbb_formatted_code = "from statsmodels.nonparametric.smoothers_lowess import lowess\n\n\ndef make_lowess(series, frac=0.7):\n    \"\"\"Use LOWESS to compute a smooth line.\n\n    series: pd.Series\n\n    returns: pd.Series\n    \"\"\"\n    y = series.values\n    x = series.index.values\n\n    smooth = lowess(y, x, frac=frac)\n    index, data = np.transpose(smooth)\n\n    return pd.Series(data, index=index)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_series_lowess</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">plot_series</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">frac</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plots a series of data points and a smooth line.</span>

<span class="sd">    series: pd.Series</span>
<span class="sd">    color: string or tuple</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;label&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
        <span class="n">options</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">name</span>

    <span class="k">if</span> <span class="n">plot_series</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">index</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">values</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">plot_series</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">index</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">values</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">])</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">smooth</span> <span class="o">=</span> <span class="n">make_lowess</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="n">frac</span><span class="o">=</span><span class="n">frac</span><span class="p">)</span>
        <span class="n">smooth</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 3;
                var nbb_unformatted_code = "def plot_series_lowess(series, color, plot_series=False, frac=0.7, **options):\n    \"\"\"Plots a series of data points and a smooth line.\n\n    series: pd.Series\n    color: string or tuple\n    \"\"\"\n    if \"label\" not in options:\n        options[\"label\"] = series.name\n\n    if plot_series or len(series) == 1:\n        x = series.index\n        y = series.values\n        plt.plot(x, y, \"o\", color=color, alpha=0.3, label=\"_\")\n\n    if not plot_series and len(series) == 1:\n        x = series.index\n        y = series.values\n        plt.plot(x, y, \"o\", color=color, alpha=0.6, label=options[\"label\"])\n\n    if len(series) > 1:\n        smooth = make_lowess(series, frac=frac)\n        smooth.plot(color=color, **options)";
                var nbb_formatted_code = "def plot_series_lowess(series, color, plot_series=False, frac=0.7, **options):\n    \"\"\"Plots a series of data points and a smooth line.\n\n    series: pd.Series\n    color: string or tuple\n    \"\"\"\n    if \"label\" not in options:\n        options[\"label\"] = series.name\n\n    if plot_series or len(series) == 1:\n        x = series.index\n        y = series.values\n        plt.plot(x, y, \"o\", color=color, alpha=0.3, label=\"_\")\n\n    if not plot_series and len(series) == 1:\n        x = series.index\n        y = series.values\n        plt.plot(x, y, \"o\", color=color, alpha=0.6, label=options[\"label\"])\n\n    if len(series) > 1:\n        smooth = make_lowess(series, frac=frac)\n        smooth.plot(color=color, **options)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">decorate</span><span class="p">(</span><span class="o">**</span><span class="n">options</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Decorate the current axes.</span>

<span class="sd">    Call decorate with keyword arguments like</span>
<span class="sd">    decorate(title=&#39;Title&#39;,</span>
<span class="sd">             xlabel=&#39;x&#39;,</span>
<span class="sd">             ylabel=&#39;y&#39;)</span>

<span class="sd">    The keyword arguments can be any of the axis properties</span>
<span class="sd">    https://matplotlib.org/api/axes_api.html</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">options</span><span class="p">)</span>

    <span class="n">handles</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">handles</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 4;
                var nbb_unformatted_code = "def decorate(**options):\n    \"\"\"Decorate the current axes.\n\n    Call decorate with keyword arguments like\n    decorate(title='Title',\n             xlabel='x',\n             ylabel='y')\n\n    The keyword arguments can be any of the axis properties\n    https://matplotlib.org/api/axes_api.html\n    \"\"\"\n    ax = plt.gca()\n    ax.set(**options)\n\n    handles, labels = ax.get_legend_handles_labels()\n    if handles:\n        ax.legend(handles, labels)\n\n    plt.tight_layout()";
                var nbb_formatted_code = "def decorate(**options):\n    \"\"\"Decorate the current axes.\n\n    Call decorate with keyword arguments like\n    decorate(title='Title',\n             xlabel='x',\n             ylabel='y')\n\n    The keyword arguments can be any of the axis properties\n    https://matplotlib.org/api/axes_api.html\n    \"\"\"\n    ax = plt.gca()\n    ax.set(**options)\n\n    handles, labels = ax.get_legend_handles_labels()\n    if handles:\n        ax.legend(handles, labels)\n\n    plt.tight_layout()";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
</section>
<section id="read-the-data">
<h1>Read the Data<a class="headerlink" href="#read-the-data" title="Permalink to this headline">#</a></h1>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">basename</span><span class="p">,</span> <span class="n">exists</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>


<span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data_dir</span><span class="o">=</span><span class="s2">&quot;../data&quot;</span><span class="p">):</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">)</span> <span class="o">/</span> <span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlretrieve</span>

        <span class="n">local</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">urlretrieve</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Downloaded &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">local</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">filename</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 49;
                var nbb_unformatted_code = "from os.path import basename, exists\nfrom pathlib import Path\n\n\ndef download(url, data_dir=\"../data\"):\n    filename = Path(data_dir) / basename(url)\n    if not exists(filename):\n        from urllib.request import urlretrieve\n\n        local, _ = urlretrieve(url, filename)\n        print(\"Downloaded \" + str(local))\n    return filename";
                var nbb_formatted_code = "from os.path import basename, exists\nfrom pathlib import Path\n\n\ndef download(url, data_dir=\"../data\"):\n    filename = Path(data_dir) / basename(url)\n    if not exists(filename):\n        from urllib.request import urlretrieve\n\n        local, _ = urlretrieve(url, filename)\n        print(\"Downloaded \" + str(local))\n    return filename";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>mkdir -p ../data
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 50;
                var nbb_unformatted_code = "!mkdir -p ../data";
                var nbb_formatted_code = "!mkdir -p ../data";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">download</span><span class="p">(</span>
    <span class="s2">&quot;https://github.com/AllenDowney/ProbablyOverthinkingIt/raw/book/data/gss_simpson.hdf&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 51;
                var nbb_unformatted_code = "filename = download(\n    \"https://github.com/AllenDowney/ProbablyOverthinkingIt/raw/book/data/gss_simpson.hdf\"\n)";
                var nbb_formatted_code = "filename = download(\n    \"https://github.com/AllenDowney/ProbablyOverthinkingIt/raw/book/data/gss_simpson.hdf\"\n)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gss</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;gss&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;cohort10&quot;</span><span class="p">])</span>
<span class="n">gss</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(68075, 214)
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 52;
                var nbb_unformatted_code = "gss = pd.read_hdf(filename, \"gss\").dropna(subset=[\"cohort10\"])\ngss.shape";
                var nbb_formatted_code = "gss = pd.read_hdf(filename, \"gss\").dropna(subset=[\"cohort10\"])\ngss.shape";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
</section>
<section id="quantifying-political-beliefs">
<h1>Quantifying Political Beliefs<a class="headerlink" href="#quantifying-political-beliefs" title="Permalink to this headline">#</a></h1>
<p>One of my goals in the chapter is to quantify liberal and conservative beliefs and see how they have changed over time, using data from the <a class="reference external" href="https://www.norc.org/Research/Projects/Pages/general-social-survey.aspx">General Social Survey</a> (GSS).
So, how do we classify beliefs as conservative or liberal? And then, how do we track those beliefs over time?</p>
<p>To answer the first question, I started with a list of about 120 core GSS questions that ask about political beliefs, broadly defined.
For each question, I identified the responses that were chosen more often by people who consider themselves conservative.</p>
<p>Then, I searched for questions with the biggest differences between the responses of liberals and conservatives. From those, I curated a list of fifteen questions that cover a diverse set of topics, with preference for questions that were asked most frequently over the years of the survey.</p>
<p>The topics that made the list are not surprising. They include economic issues like public spending on welfare and the environment; policy issues like the legality of guns, drugs, and pornography; as well as questions related to sex education and prayer in schools, capital punishment, assisted suicide, and (of course) abortion. The list also includes three of the questions we looked at in previous sections, related to open housing laws, women in politics, and homosexuality.</p>
<p>For the current purpose, we are not concerned with the wording of the questions; we only need to know that liberals and conservatives give different answers. But if you are curious, I’ll put the questions at the end of this post.</p>
<p>To classify respondents, I’ll use responses to the following question:</p>
<blockquote>
<div><p>I’m going to show you a seven-point scale on which the political views that people might hold are arranged from extremely liberal–point 1–to extremely conservative–point 7. Where would you place yourself on this scale?</p>
</div></blockquote>
<p>The points on the scale are Extremely liberal, Liberal, and Slightly liberal; Moderate;	Slightly conservative, Conservative, and Extremely conservative.</p>
<p>I’ll lump the first three points into “Liberal” and the last three into “Conservative”, which makes the number of groups manageable and, it turns out, roughly equal in size.
Here’s how many respondents are in each group.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gss</span><span class="p">[</span><span class="s2">&quot;polviews3&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Moderate        22674
Conservative    20151
Liberal         16006
Name: polviews3, dtype: int64
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 8;
                var nbb_unformatted_code = "gss[\"polviews3\"].value_counts()";
                var nbb_formatted_code = "gss[\"polviews3\"].value_counts()";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Here are the variable names and the responses chosen more often by conservatives.
Most of the questions are binary, but some allow a range of responses.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convervative_values</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;abany&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span>
    <span class="s2">&quot;homosex&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="s2">&quot;premarsx&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="s2">&quot;prayer&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span>
    <span class="s2">&quot;natfare&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span>
    <span class="s2">&quot;grass&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span>
    <span class="s2">&quot;natenvir&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>  <span class="c1"># about right or too much</span>
    <span class="s2">&quot;divlaw&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span>
    <span class="s2">&quot;cappun&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="s2">&quot;racopen&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="s2">&quot;letdie1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span>
    <span class="s2">&quot;fepol&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="s2">&quot;gunlaw&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span>
    <span class="s2">&quot;sexeduc&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span>
    <span class="s2">&quot;pornlaw&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 9;
                var nbb_unformatted_code = "convervative_values = {\n    \"abany\": [2],\n    \"homosex\": [1, 2, 3],\n    \"premarsx\": [1, 2, 3],\n    \"prayer\": [2],\n    \"natfare\": [3],\n    \"grass\": [2],\n    \"natenvir\": [2, 3],  # about right or too much\n    \"divlaw\": [2],\n    \"cappun\": [1],\n    \"racopen\": [1],\n    \"letdie1\": [2],\n    \"fepol\": [1],\n    \"gunlaw\": [2],\n    \"sexeduc\": [2],\n    \"pornlaw\": [1],\n}";
                var nbb_formatted_code = "convervative_values = {\n    \"abany\": [2],\n    \"homosex\": [1, 2, 3],\n    \"premarsx\": [1, 2, 3],\n    \"prayer\": [2],\n    \"natfare\": [3],\n    \"grass\": [2],\n    \"natenvir\": [2, 3],  # about right or too much\n    \"divlaw\": [2],\n    \"cappun\": [1],\n    \"racopen\": [1],\n    \"letdie1\": [2],\n    \"fepol\": [1],\n    \"gunlaw\": [2],\n    \"sexeduc\": [2],\n    \"pornlaw\": [1],\n}";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">order</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;homosex&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cappun&quot;</span><span class="p">,</span>
    <span class="s2">&quot;grass&quot;</span><span class="p">,</span>
    <span class="s2">&quot;abany&quot;</span><span class="p">,</span>
    <span class="s2">&quot;prayer&quot;</span><span class="p">,</span>
    <span class="s2">&quot;premarsx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;divlaw&quot;</span><span class="p">,</span>
    <span class="s2">&quot;natfare&quot;</span><span class="p">,</span>
    <span class="s2">&quot;natenvir&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pornlaw&quot;</span><span class="p">,</span>
    <span class="s2">&quot;racopen&quot;</span><span class="p">,</span>
    <span class="s2">&quot;letdie1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fepol&quot;</span><span class="p">,</span>
    <span class="s2">&quot;gunlaw&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sexeduc&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 10;
                var nbb_unformatted_code = "order = [\n    \"homosex\",\n    \"cappun\",\n    \"grass\",\n    \"abany\",\n    \"prayer\",\n    \"premarsx\",\n    \"divlaw\",\n    \"natfare\",\n    \"natenvir\",\n    \"pornlaw\",\n    \"racopen\",\n    \"letdie1\",\n    \"fepol\",\n    \"gunlaw\",\n    \"sexeduc\",\n]";
                var nbb_formatted_code = "order = [\n    \"homosex\",\n    \"cappun\",\n    \"grass\",\n    \"abany\",\n    \"prayer\",\n    \"premarsx\",\n    \"divlaw\",\n    \"natfare\",\n    \"natenvir\",\n    \"pornlaw\",\n    \"racopen\",\n    \"letdie1\",\n    \"fepol\",\n    \"gunlaw\",\n    \"sexeduc\",\n]";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>I’ll extract the answers to the fifteen questions into a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> of boolean values, <code class="docutils literal notranslate"><span class="pre">True</span></code> if the respondent chose a conservative response, <code class="docutils literal notranslate"><span class="pre">False</span></code> if they didn’t and <code class="docutils literal notranslate"><span class="pre">NaN</span></code> if they were not asked the question or didn’t answer.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">questions</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>

<span class="k">for</span> <span class="n">varname</span> <span class="ow">in</span> <span class="n">order</span><span class="p">:</span>
    <span class="n">questions</span><span class="p">[</span><span class="n">varname</span><span class="p">]</span> <span class="o">=</span> <span class="n">gss</span><span class="p">[</span><span class="n">varname</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">convervative_values</span><span class="p">[</span><span class="n">varname</span><span class="p">])</span>
    <span class="n">null</span> <span class="o">=</span> <span class="n">gss</span><span class="p">[</span><span class="n">varname</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span>
    <span class="n">questions</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">null</span><span class="p">,</span> <span class="n">varname</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 11;
                var nbb_unformatted_code = "questions = pd.DataFrame(dtype=int)\n\nfor varname in order:\n    questions[varname] = gss[varname].isin(convervative_values[varname])\n    null = gss[varname].isna()\n    questions.loc[null, varname] = np.nan";
                var nbb_formatted_code = "questions = pd.DataFrame(dtype=int)\n\nfor varname in order:\n    questions[varname] = gss[varname].isin(convervative_values[varname])\n    null = gss[varname].isna()\n    questions.loc[null, varname] = np.nan";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>For each questions, here’s the fraction of all respondents who chose a conservative response.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">questions</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>sexeduc     0.122969
gunlaw      0.247280
fepol       0.287992
letdie1     0.316496
pornlaw     0.367675
racopen     0.380868
natenvir    0.382537
natfare     0.473809
divlaw      0.491176
premarsx    0.545764
abany       0.588234
prayer      0.594343
grass       0.690151
cappun      0.706214
homosex     0.715237
dtype: float64
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 12;
                var nbb_unformatted_code = "questions.mean().sort_values()";
                var nbb_formatted_code = "questions.mean().sort_values()";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Now let’s group the respondents by political label and compute the percentage of conservative responses in each.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">augmented</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">questions</span><span class="p">,</span> <span class="n">gss</span><span class="p">[</span><span class="s2">&quot;polviews3&quot;</span><span class="p">]],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">augmented</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;polviews3&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">table</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>polviews3</th>
      <th>Conservative</th>
      <th>Liberal</th>
      <th>Moderate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>homosex</th>
      <td>81.451613</td>
      <td>54.716981</td>
      <td>71.971581</td>
    </tr>
    <tr>
      <th>cappun</th>
      <td>79.277404</td>
      <td>57.482234</td>
      <td>72.702286</td>
    </tr>
    <tr>
      <th>grass</th>
      <td>76.629890</td>
      <td>55.201863</td>
      <td>68.811501</td>
    </tr>
    <tr>
      <th>abany</th>
      <td>69.364351</td>
      <td>42.418054</td>
      <td>59.065954</td>
    </tr>
    <tr>
      <th>prayer</th>
      <td>66.934087</td>
      <td>44.098649</td>
      <td>62.514552</td>
    </tr>
    <tr>
      <th>premarsx</th>
      <td>65.097607</td>
      <td>39.699676</td>
      <td>52.196638</td>
    </tr>
    <tr>
      <th>divlaw</th>
      <td>58.520050</td>
      <td>38.285834</td>
      <td>48.083854</td>
    </tr>
    <tr>
      <th>natfare</th>
      <td>58.065690</td>
      <td>34.331875</td>
      <td>47.990982</td>
    </tr>
    <tr>
      <th>natenvir</th>
      <td>48.395992</td>
      <td>26.128530</td>
      <td>37.341671</td>
    </tr>
    <tr>
      <th>pornlaw</th>
      <td>44.122149</td>
      <td>25.163528</td>
      <td>35.973006</td>
    </tr>
    <tr>
      <th>racopen</th>
      <td>42.619643</td>
      <td>28.113565</td>
      <td>37.251356</td>
    </tr>
    <tr>
      <th>letdie1</th>
      <td>38.535436</td>
      <td>24.047427</td>
      <td>28.388457</td>
    </tr>
    <tr>
      <th>fepol</th>
      <td>33.392969</td>
      <td>21.531808</td>
      <td>27.896720</td>
    </tr>
    <tr>
      <th>gunlaw</th>
      <td>31.051863</td>
      <td>18.366808</td>
      <td>23.498143</td>
    </tr>
    <tr>
      <th>sexeduc</th>
      <td>18.271120</td>
      <td>7.282686</td>
      <td>9.348565</td>
    </tr>
  </tbody>
</table>
</div></div><script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 13;
                var nbb_unformatted_code = "augmented = pd.concat([questions, gss[\"polviews3\"]], axis=1)\ntable = augmented.groupby(\"polviews3\").mean().transpose() * 100\ntable";
                var nbb_formatted_code = "augmented = pd.concat([questions, gss[\"polviews3\"]], axis=1)\ntable = augmented.groupby(\"polviews3\").mean().transpose() * 100\ntable";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Here’s a short text description for each question.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">issue_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;abany&quot;</span><span class="p">:</span> <span class="s2">&quot;Abortion&quot;</span><span class="p">,</span>
    <span class="s2">&quot;homosex&quot;</span><span class="p">:</span> <span class="s2">&quot;Homosexuality&quot;</span><span class="p">,</span>
    <span class="s2">&quot;premarsx&quot;</span><span class="p">:</span> <span class="s2">&quot;Premarital sex&quot;</span><span class="p">,</span>
    <span class="s2">&quot;prayer&quot;</span><span class="p">:</span> <span class="s2">&quot;School prayer&quot;</span><span class="p">,</span>
    <span class="s2">&quot;natfare&quot;</span><span class="p">:</span> <span class="s2">&quot;Welfare spending&quot;</span><span class="p">,</span>
    <span class="s2">&quot;grass&quot;</span><span class="p">:</span> <span class="s2">&quot;Legal cannabis&quot;</span><span class="p">,</span>
    <span class="s2">&quot;natenvir&quot;</span><span class="p">:</span> <span class="s2">&quot;Environment&quot;</span><span class="p">,</span>
    <span class="s2">&quot;divlaw&quot;</span><span class="p">:</span> <span class="s2">&quot;Divorce&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cappun&quot;</span><span class="p">:</span> <span class="s2">&quot;Capital punishment&quot;</span><span class="p">,</span>
    <span class="s2">&quot;racopen&quot;</span><span class="p">:</span> <span class="s2">&quot;Fair housing law&quot;</span><span class="p">,</span>
    <span class="s2">&quot;letdie1&quot;</span><span class="p">:</span> <span class="s2">&quot;Assisted suicide&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fepol&quot;</span><span class="p">:</span> <span class="s2">&quot;Women in politics&quot;</span><span class="p">,</span>
    <span class="s2">&quot;gunlaw&quot;</span><span class="p">:</span> <span class="s2">&quot;Gun law&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sexeduc&quot;</span><span class="p">:</span> <span class="s2">&quot;Sex education&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pornlaw&quot;</span><span class="p">:</span> <span class="s2">&quot;Pornography&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">issue_names</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">issue_dict</span><span class="p">)[</span><span class="n">order</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 14;
                var nbb_unformatted_code = "issue_dict = {\n    \"abany\": \"Abortion\",\n    \"homosex\": \"Homosexuality\",\n    \"premarsx\": \"Premarital sex\",\n    \"prayer\": \"School prayer\",\n    \"natfare\": \"Welfare spending\",\n    \"grass\": \"Legal cannabis\",\n    \"natenvir\": \"Environment\",\n    \"divlaw\": \"Divorce\",\n    \"cappun\": \"Capital punishment\",\n    \"racopen\": \"Fair housing law\",\n    \"letdie1\": \"Assisted suicide\",\n    \"fepol\": \"Women in politics\",\n    \"gunlaw\": \"Gun law\",\n    \"sexeduc\": \"Sex education\",\n    \"pornlaw\": \"Pornography\",\n}\n\nissue_names = pd.Series(issue_dict)[order].values";
                var nbb_formatted_code = "issue_dict = {\n    \"abany\": \"Abortion\",\n    \"homosex\": \"Homosexuality\",\n    \"premarsx\": \"Premarital sex\",\n    \"prayer\": \"School prayer\",\n    \"natfare\": \"Welfare spending\",\n    \"grass\": \"Legal cannabis\",\n    \"natenvir\": \"Environment\",\n    \"divlaw\": \"Divorce\",\n    \"cappun\": \"Capital punishment\",\n    \"racopen\": \"Fair housing law\",\n    \"letdie1\": \"Assisted suicide\",\n    \"fepol\": \"Women in politics\",\n    \"gunlaw\": \"Gun law\",\n    \"sexeduc\": \"Sex education\",\n    \"pornlaw\": \"Pornography\",\n}\n\nissue_names = pd.Series(issue_dict)[order].values";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>The following figure shows, for each question, the percentage of liberals, moderates, and conservatives who chose one of the conservative responses.</p>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">polview_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Conservative&quot;</span><span class="p">,</span> <span class="s2">&quot;Moderate&quot;</span><span class="p">,</span> <span class="s2">&quot;Liberal&quot;</span><span class="p">]</span>

<span class="n">muted</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;muted&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">polview_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">polview_names</span><span class="p">,</span> <span class="p">[</span><span class="n">muted</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">muted</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">muted</span><span class="p">[</span><span class="mi">0</span><span class="p">]]))</span>
<span class="n">marker_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">polview_names</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;^&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">]))</span>
<span class="n">line_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">polview_names</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="s2">&quot;-.&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 15;
                var nbb_unformatted_code = "polview_names = [\"Conservative\", \"Moderate\", \"Liberal\"]\n\nmuted = sns.color_palette(\"muted\", 5)\npolview_map = dict(zip(polview_names, [muted[3], muted[4], muted[0]]))\nmarker_map = dict(zip(polview_names, [\"s\", \"^\", \"o\"]))\nline_map = dict(zip(polview_names, [\"--\", \"-.\", \":\"]))";
                var nbb_formatted_code = "polview_names = [\"Conservative\", \"Moderate\", \"Liberal\"]\n\nmuted = sns.color_palette(\"muted\", 5)\npolview_map = dict(zip(polview_names, [muted[3], muted[4], muted[0]]))\nmarker_map = dict(zip(polview_names, [\"s\", \"^\", \"o\"]))\nline_map = dict(zip(polview_names, [\"--\", \"-.\", \":\"]))";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span>
    <span class="n">issue_names</span><span class="p">,</span>
    <span class="n">table</span><span class="p">[</span><span class="s2">&quot;Liberal&quot;</span><span class="p">],</span>
    <span class="n">table</span><span class="p">[</span><span class="s2">&quot;Conservative&quot;</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">polviews</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">polview_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="n">polviews</span><span class="p">]</span>
    <span class="n">marker</span> <span class="o">=</span> <span class="n">marker_map</span><span class="p">[</span><span class="n">polviews</span><span class="p">]</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">issue_names</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">polviews</span><span class="p">)</span>

<span class="n">decorate</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Percent choosing conservative responses&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/overton_irt_28_0.png" src="_images/overton_irt_28_0.png" />
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 16;
                var nbb_unformatted_code = "plt.figure(figsize=(7, 4.5))\nplt.hlines(\n    issue_names,\n    table[\"Liberal\"],\n    table[\"Conservative\"],\n    color=\"gray\",\n    alpha=0.2,\n)\n\nfor polviews, color in polview_map.items():\n    x = table[polviews]\n    marker = marker_map[polviews]\n    plt.plot(x, issue_names, marker, color=color, alpha=0.9, label=polviews)\n\ndecorate(xlabel=\"Percent choosing conservative responses\")";
                var nbb_formatted_code = "plt.figure(figsize=(7, 4.5))\nplt.hlines(\n    issue_names,\n    table[\"Liberal\"],\n    table[\"Conservative\"],\n    color=\"gray\",\n    alpha=0.2,\n)\n\nfor polviews, color in polview_map.items():\n    x = table[polviews]\n    marker = marker_map[polviews]\n    plt.plot(x, issue_names, marker, color=color, alpha=0.9, label=polviews)\n\ndecorate(xlabel=\"Percent choosing conservative responses\")";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Not surprisingly, conservatives are more likely than liberals to choose conservative responses, and moderates are somewhere in the middle.
The differences between the groups range from 11 to 27 percentage points.</p>
<p>These results include respondents over the interval from 1973 to 2021, so they are not a snapshot of recent conditions.
Rather, they show the issues that have distinguished conservatives from liberals over the last 50 years.</p>
</section>
<section id="estimating-conservatism">
<h1>Estimating Conservatism<a class="headerlink" href="#estimating-conservatism" title="Permalink to this headline">#</a></h1>
<p>Now that we’ve chosen questions that distinguish liberals and conservatives, the next step is to estimate the conservatism of each respondent.
If all respondents answered all of the questions, this would be relatively easy, but they didn’t.</p>
<p>Some were surveyed before a particular question was added to the survey or after it was removed.
Also, in some years respondents were randomly assigned a “ballot” with subset of the questions.
Finally, a small percentage of respondents refuse to answer some questions, or say “I don’t know”.</p>
<p>The following figure shows the distribution of the number of questions answered.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">empiricaldist</span> <span class="kn">import</span> <span class="n">Cdf</span>

<span class="n">answered</span> <span class="o">=</span> <span class="n">questions</span><span class="o">.</span><span class="n">notna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">answered</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="n">decorate</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Number of questions answered&quot;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;PMF&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/overton_irt_33_0.png" src="_images/overton_irt_33_0.png" />
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 18;
                var nbb_unformatted_code = "# most people answered 5 of more questions\n\nfrom empiricaldist import Cdf\n\nanswered = questions.notna().sum(axis=1)\nCdf.from_seq(answered).plot()\n\ndecorate(xlabel=\"Number of questions answered\", ylabel=\"PMF\")";
                var nbb_formatted_code = "# most people answered 5 of more questions\n\nfrom empiricaldist import Cdf\n\nanswered = questions.notna().sum(axis=1)\nCdf.from_seq(answered).plot()\n\ndecorate(xlabel=\"Number of questions answered\", ylabel=\"PMF\")";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Most respondents answered at least 5 questions, which is enough to get a sense of how conservative they are.
But there’s another problem: some questions are “easier” than others.
For some questions a majority choose a conservative response; for others it’s a small minority.
If two people answer a different subject of the questions, we can’t compare them directly.</p>
<p>However, this is exactly the problem <a class="reference external" href="https://en.wikipedia.org/wiki/Item_response_theory">item response theory</a> (IRT) is intended to solve!
The fundamental assumptions of IRT are:</p>
<ul class="simple">
<li><p>Each question has some level of difficulty, <span class="math notranslate nohighlight">\(d_j\)</span>.</p></li>
<li><p>Each respondent has some level of efficacy, <span class="math notranslate nohighlight">\(e_i\)</span>.</p></li>
<li><p>The probability that a respondent gets a question right is a function of <span class="math notranslate nohighlight">\(d_j\)</span> and <span class="math notranslate nohighlight">\(e_i\)</span>.</p></li>
</ul>
<p>In this context, a question is “difficult” if few people choose a conservative response and “easy” if many do.
And if a respondent has high “efficacy”, that means they have a high tendency to choose conservative responses.</p>
<p>In one simple version of IRT, if a person with efficacy <span class="math notranslate nohighlight">\(e_i\)</span> answers a question with difficulty <span class="math notranslate nohighlight">\(d_j\)</span>, the probability they get it right is</p>
<div class="math notranslate nohighlight">
\[ \operatorname{expit}~(e_i - d_j)\]</div>
<p>Efficacy and difficulty are latent attributes; that is, we don’t observe them directly. Rather, we infer them from data.
In some models, we use a large dataset to estimate <span class="math notranslate nohighlight">\(e\)</span> for each respondent and <span class="math notranslate nohighlight">\(d\)</span> for each question simultaneously.
For this problem, that would be impractical, so I’ll use a shortcut: I’ll use the data to assign a difficulty to each question.
Then I can estimate the efficacy of each respondent independently, which is simple and fast.</p>
<p>For each question, we know the proportion of respondents who chose a conservative response, which I’ll call <span class="math notranslate nohighlight">\(p_j\)</span>.</p>
<p>To assign a difficulty to each question, I’ll use this heuristic: the difficulty of a question, <span class="math notranslate nohighlight">\(d_j\)</span>, is the value so that if the question is answered by someone with <span class="math notranslate nohighlight">\(e=0\)</span>, the probability they get it “right” is <span class="math notranslate nohighlight">\(p_j\)</span>.
This heuristic leads to the assignment:</p>
<div class="math notranslate nohighlight">
\[ d_j = -\operatorname{logit}~(p_j) \]</div>
<p>The following figure shows these values for the fifteen questions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.special</span> <span class="kn">import</span> <span class="n">logit</span>

<span class="n">difficulty</span> <span class="o">=</span> <span class="o">-</span><span class="n">logit</span><span class="p">(</span><span class="n">questions</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
<span class="n">difficulty</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>homosex    -0.920956
cappun     -0.877069
grass      -0.800827
abany      -0.356669
prayer     -0.381949
premarsx   -0.183572
divlaw      0.035300
natfare     0.104861
natenvir    0.478795
pornlaw     0.542204
racopen     0.485867
letdie1     0.769923
fepol       0.905155
gunlaw      1.113172
sexeduc     1.964611
dtype: float64
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 19;
                var nbb_unformatted_code = "from scipy.special import logit\n\ndifficulty = -logit(questions.mean())\ndifficulty";
                var nbb_formatted_code = "from scipy.special import logit\n\ndifficulty = -logit(questions.mean())\ndifficulty";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">difficulty</span><span class="p">,</span> <span class="n">issue_names</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span>

<span class="n">decorate</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Difficulty (logit scale)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/overton_irt_38_0.png" src="_images/overton_irt_38_0.png" />
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 20;
                var nbb_unformatted_code = "plt.figure(figsize=(7, 4.5))\n\nplt.plot(difficulty, issue_names, \"x\")\n\ndecorate(xlabel=\"Difficulty (logit scale)\")";
                var nbb_formatted_code = "plt.figure(figsize=(7, 4.5))\n\nplt.plot(difficulty, issue_names, \"x\")\n\ndecorate(xlabel=\"Difficulty (logit scale)\")";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Where <span class="math notranslate nohighlight">\(p_j\)</span> is low, <span class="math notranslate nohighlight">\(d_j\)</span> is high.
The range of these values, by itself, doesn’t mean very much; what matters is how the values of <span class="math notranslate nohighlight">\(e\)</span> and <span class="math notranslate nohighlight">\(d\)</span> relate to each other.</p>
<p>Given the assigned difficulties, we can identify a useful range of values for efficacy.
The following figure shows the range I used, from -6 to 6.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.special</span> <span class="kn">import</span> <span class="n">expit</span>

<span class="n">es</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>

<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">expit</span><span class="p">(</span><span class="n">es</span> <span class="o">-</span> <span class="n">d</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">es</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;$d$ = </span><span class="si">{</span><span class="n">d</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">decorate</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Efficacy&quot;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Probability of giving conservative answer&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/overton_irt_40_0.png" src="_images/overton_irt_40_0.png" />
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 21;
                var nbb_unformatted_code = "from scipy.special import expit\n\nes = np.linspace(-6, 6, 21)\n\nfor d in [-1, 0, 1, 2]:\n    p = expit(es - d)\n    plt.plot(es, p, label=f\"$d$ = {d}\")\n\ndecorate(xlabel=\"Efficacy\", ylabel=\"Probability of giving conservative answer\")";
                var nbb_formatted_code = "from scipy.special import expit\n\nes = np.linspace(-6, 6, 21)\n\nfor d in [-1, 0, 1, 2]:\n    p = expit(es - d)\n    plt.plot(es, p, label=f\"$d$ = {d}\")\n\ndecorate(xlabel=\"Efficacy\", ylabel=\"Probability of giving conservative answer\")";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Someone with efficacy -6 is very liberal; their probability of choosing a conservative response is nearly 0, even for the easiest question (<span class="math notranslate nohighlight">\(d = -1\)</span>).
Someone with efficacy 6 is very conservative; their probability of choosing a conservative responses is nearly 1, even for the most difficulty question (<span class="math notranslate nohighlight">\(d = 2\)</span>).</p>
<p>Given the difficulties of the questions, we can compute the expected number of conservative responses at each level of efficacy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">E</span><span class="p">,</span> <span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">es</span><span class="p">,</span> <span class="n">difficulty</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">expit</span><span class="p">(</span><span class="n">E</span> <span class="o">-</span> <span class="n">D</span><span class="p">)</span>
<span class="n">ns</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">es</span><span class="p">,</span> <span class="n">ns</span><span class="p">)</span>

<span class="n">decorate</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Efficacy&quot;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Number of conservative answers&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/overton_irt_42_0.png" src="_images/overton_irt_42_0.png" />
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 22;
                var nbb_unformatted_code = "E, D = np.meshgrid(es, difficulty)\nP = expit(E - D)\nns = P.sum(axis=0)\nplt.plot(es, ns)\n\ndecorate(xlabel=\"Efficacy\", ylabel=\"Number of conservative answers\")";
                var nbb_formatted_code = "E, D = np.meshgrid(es, difficulty)\nP = expit(E - D)\nns = P.sum(axis=0)\nplt.plot(es, ns)\n\ndecorate(xlabel=\"Efficacy\", ylabel=\"Number of conservative answers\")";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Someone with efficacy 0 is expected to give about 7 conservative responses our of 15 questions.</p>
</section>
<section id="id1">
<h1>Estimating Conservatism<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h1>
<p>Now let’s see how we can estimate <span class="math notranslate nohighlight">\(e_i\)</span> for a respondent based on their answers.
I’ll start with a weakly informative prior that suggest people are more likely to be in the middle and less likely to be at the extremes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">norm</span>
<span class="kn">from</span> <span class="nn">empiricaldist</span> <span class="kn">import</span> <span class="n">Pmf</span>

<span class="n">ps</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">es</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">prior</span> <span class="o">=</span> <span class="n">Pmf</span><span class="p">(</span><span class="n">ps</span><span class="p">,</span> <span class="n">es</span><span class="p">)</span>
<span class="n">prior</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
<span class="n">prior</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">decorate</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Efficacy&quot;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Prior probability&quot;</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/overton_irt_45_0.png" src="_images/overton_irt_45_0.png" />
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 23;
                var nbb_unformatted_code = "from scipy.stats import norm\nfrom empiricaldist import Pmf\n\nps = norm.pdf(es, 0, 4)\nprior = Pmf(ps, es)\nprior.normalize()\nprior.plot()\ndecorate(xlabel=\"Efficacy\", ylabel=\"Prior probability\", ylim=[0, 0.08])";
                var nbb_formatted_code = "from scipy.stats import norm\nfrom empiricaldist import Pmf\n\nps = norm.pdf(es, 0, 4)\nprior = Pmf(ps, es)\nprior.normalize()\nprior.plot()\ndecorate(xlabel=\"Efficacy\", ylabel=\"Prior probability\", ylim=[0, 0.08])";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>To demonstrate the estimation process, I’ll use the responses from an arbitrarily-chosen respondent.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">row</span> <span class="o">=</span> <span class="n">questions</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">]</span>
<span class="n">row</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>homosex       NaN
cappun       True
grass       False
abany         NaN
prayer      False
premarsx     True
divlaw       True
natfare     False
natenvir     True
pornlaw     False
racopen      True
letdie1       NaN
fepol       False
gunlaw       True
sexeduc     False
Name: 5034, dtype: object
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 24;
                var nbb_unformatted_code = "row = questions.iloc[5000]\nrow";
                var nbb_formatted_code = "row = questions.iloc[5000]\nrow";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>To compute the likelihood of the data, I’ll make an array, <code class="docutils literal notranslate"><span class="pre">P</span></code>, with one row per question and one column for each hypothetical value of <span class="math notranslate nohighlight">\(e\)</span>.
Each element of <code class="docutils literal notranslate"><span class="pre">P</span></code> is the probability that someone with a given efficacy gets a given question “right”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">E</span><span class="p">,</span> <span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">es</span><span class="p">,</span> <span class="n">difficulty</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">expit</span><span class="p">(</span><span class="n">E</span> <span class="o">-</span> <span class="n">D</span><span class="p">)</span>
<span class="n">Q</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">P</span>
<span class="n">Q</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(15, 21)
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 25;
                var nbb_unformatted_code = "E, D = np.meshgrid(es, difficulty)\nP = expit(E - D)\nQ = 1 - P\nQ.shape";
                var nbb_formatted_code = "E, D = np.meshgrid(es, difficulty)\nP = expit(E - D)\nQ = 1 - P\nQ.shape";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Q</span></code> is the complement of <code class="docutils literal notranslate"><span class="pre">P</span></code>; each element is the probability that someone with a given efficacy gets a given question “wrong”.</p>
<p>Now, for a given row of responses we can compute the likelihood of the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># compute the likelihoods of the conservative responses</span>
<span class="n">index1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">values</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">like1</span> <span class="o">=</span> <span class="n">P</span><span class="p">[</span><span class="n">index1</span><span class="p">]</span>

<span class="c1"># compute the likelihoods of the non-conservative responses</span>
<span class="n">index2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">values</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">like2</span> <span class="o">=</span> <span class="n">Q</span><span class="p">[</span><span class="n">index2</span><span class="p">]</span>

<span class="c1"># multiply them all together</span>
<span class="n">like</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">like1</span><span class="p">,</span> <span class="n">like2</span><span class="p">])</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 26;
                var nbb_unformatted_code = "# compute the likelihoods of the conservative responses\nindex1 = np.nonzero(row.values == True)\nlike1 = P[index1]\n\n# compute the likelihoods of the non-conservative responses\nindex2 = np.nonzero(row.values == False)\nlike2 = Q[index2]\n\n# multiply them all together\nlike = np.vstack([like1, like2]).prod(axis=0)";
                var nbb_formatted_code = "# compute the likelihoods of the conservative responses\nindex1 = np.nonzero(row.values == True)\nlike1 = P[index1]\n\n# compute the likelihoods of the non-conservative responses\nindex2 = np.nonzero(row.values == False)\nlike2 = Q[index2]\n\n# multiply them all together\nlike = np.vstack([like1, like2]).prod(axis=0)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">like</span></code> is contains the likelihood of the data for each value of <span class="math notranslate nohighlight">\(e\)</span>.</p>
<p>To do the Bayesian update, we multiply the prior by the likelihood and normalize.
I’m using <code class="docutils literal notranslate"><span class="pre">ns</span></code> as the index of the posterior PMF, so the results are expressed in terms of the number of conservative responses, which is easier to interpret than efficacy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">posterior</span> <span class="o">=</span> <span class="n">Pmf</span><span class="p">(</span><span class="n">prior</span><span class="o">.</span><span class="n">values</span> <span class="o">*</span> <span class="n">like</span><span class="p">,</span> <span class="n">ns</span><span class="p">)</span>
<span class="n">posterior</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
<span class="n">posterior</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">posterior</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(7.75764821546671, 1.9344763248098429)
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 27;
                var nbb_unformatted_code = "posterior = Pmf(prior.values * like, ns)\nposterior.normalize()\nposterior.mean(), posterior.std()";
                var nbb_formatted_code = "posterior = Pmf(prior.values * like, ns)\nposterior.normalize()\nposterior.mean(), posterior.std()";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Here’s what the posterior distribution looks like.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">posterior</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">decorate</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Number of conservative responses&quot;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;PMF&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/overton_irt_55_0.png" src="_images/overton_irt_55_0.png" />
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 28;
                var nbb_unformatted_code = "posterior.plot()\ndecorate(xlabel=\"Number of conservative responses\", ylabel=\"PMF\")";
                var nbb_formatted_code = "posterior.plot()\ndecorate(xlabel=\"Number of conservative responses\", ylabel=\"PMF\")";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>The posterior mean is about 7.8 questions, but the spread of the distribution is wide, indicating that we are still uncertain about how conservative this respondent is.</p>
<p>Here’s the same code in a function.</p>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">estimate_conservatism</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Compute the posterior distribution of conservatism.</span>

<span class="sd">    row: pd.Series of True, False, or NaN, one per question</span>

<span class="sd">    returns: posterior mean and std of estimated conservatism</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">index1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">values</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">like1</span> <span class="o">=</span> <span class="n">P</span><span class="p">[</span><span class="n">index1</span><span class="p">]</span>

    <span class="n">index2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">values</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span>
    <span class="n">like2</span> <span class="o">=</span> <span class="n">Q</span><span class="p">[</span><span class="n">index2</span><span class="p">]</span>

    <span class="n">like</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">like1</span><span class="p">,</span> <span class="n">like2</span><span class="p">])</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">posterior</span> <span class="o">=</span> <span class="n">Pmf</span><span class="p">(</span><span class="n">prior</span><span class="o">.</span><span class="n">values</span> <span class="o">*</span> <span class="n">like</span><span class="p">,</span> <span class="n">ns</span><span class="p">)</span>
    <span class="n">posterior</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">posterior</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">posterior</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 29;
                var nbb_unformatted_code = "def estimate_conservatism(row):\n    \"\"\"Compute the posterior distribution of conservatism.\n\n    row: pd.Series of True, False, or NaN, one per question\n\n    returns: posterior mean and std of estimated conservatism\n    \"\"\"\n    index1 = np.nonzero(row.values == True)\n    like1 = P[index1]\n\n    index2 = np.nonzero(row.values == False)\n    like2 = Q[index2]\n\n    like = np.vstack([like1, like2]).prod(axis=0)\n\n    posterior = Pmf(prior.values * like, ns)\n    posterior.normalize()\n\n    return posterior.mean(), posterior.std()";
                var nbb_formatted_code = "def estimate_conservatism(row):\n    \"\"\"Compute the posterior distribution of conservatism.\n\n    row: pd.Series of True, False, or NaN, one per question\n\n    returns: posterior mean and std of estimated conservatism\n    \"\"\"\n    index1 = np.nonzero(row.values == True)\n    like1 = P[index1]\n\n    index2 = np.nonzero(row.values == False)\n    like2 = Q[index2]\n\n    like = np.vstack([like1, like2]).prod(axis=0)\n\n    posterior = Pmf(prior.values * like, ns)\n    posterior.normalize()\n\n    return posterior.mean(), posterior.std()";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>So we can apply it to the whole dataset row-wise.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">time</span> res = questions.apply(estimate_conservatism, axis=1, result_type=&#39;expand&#39;)
<span class="n">mean</span><span class="p">,</span> <span class="n">std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 26.6 s, sys: 196 ms, total: 26.8 s
Wall time: 26.6 s
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 30;
                var nbb_unformatted_code = "%time res = questions.apply(estimate_conservatism, axis=1, result_type='expand')\nmean, std = np.transpose(res.values)";
                var nbb_formatted_code = "%time res = questions.apply(estimate_conservatism, axis=1, result_type='expand')\nmean, std = np.transpose(res.values)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Doing the calculation one row at a time takes longer than I’d like. So before we look at the results, let’s speed it up.</p>
</section>
<section id="array-operations-for-the-win">
<h1>Array Operations For the Win<a class="headerlink" href="#array-operations-for-the-win" title="Permalink to this headline">#</a></h1>
<p>To eliminate the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop, we can compute the results for all respondents
with a single 3-D array: one row for each respondent, one column for each question,
one page for each hypothetical value of <span class="math notranslate nohighlight">\(e\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">questions</span><span class="o">.</span><span class="n">shape</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">es</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
<span class="n">res</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(68075, 15, 21)
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 31;
                var nbb_unformatted_code = "n, m = questions.shape\nsize = n, m, len(es)\nres = np.empty(size)\nres.shape";
                var nbb_formatted_code = "n, m = questions.shape\nsize = n, m, len(es)\nres = np.empty(size)\nres.shape";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Now we can fill the array with the likelihoods of conservative and non-conservative responses; where there’s a <code class="docutils literal notranslate"><span class="pre">NaN</span></code>, we fill in a sequence of <code class="docutils literal notranslate"><span class="pre">1</span></code>s.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">questions</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
<span class="n">ii</span><span class="p">,</span> <span class="n">jj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">res</span><span class="p">[</span><span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">Q</span><span class="p">[</span><span class="n">jj</span><span class="p">]</span>
<span class="n">ii</span><span class="p">,</span> <span class="n">jj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">res</span><span class="p">[</span><span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">P</span><span class="p">[</span><span class="n">jj</span><span class="p">]</span>
<span class="n">ii</span><span class="p">,</span> <span class="n">jj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">res</span><span class="p">[</span><span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 32;
                var nbb_unformatted_code = "a = questions.fillna(2).astype(int).values\nii, jj = np.nonzero(a == 0)\nres[ii, jj, :] = Q[jj]\nii, jj = np.nonzero(a == 1)\nres[ii, jj, :] = P[jj]\nii, jj = np.nonzero(a == 2)\nres[ii, jj, :] = 1";
                var nbb_formatted_code = "a = questions.fillna(2).astype(int).values\nii, jj = np.nonzero(a == 0)\nres[ii, jj, :] = Q[jj]\nii, jj = np.nonzero(a == 1)\nres[ii, jj, :] = P[jj]\nii, jj = np.nonzero(a == 2)\nres[ii, jj, :] = 1";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Multiplying along the rows gives the likelihood of each row of responses, which we multiply by the prior probabilities:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">product</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">prior</span><span class="o">.</span><span class="n">values</span>
<span class="n">product</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(68075, 21)
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 33;
                var nbb_unformatted_code = "product = res.prod(axis=1) * prior.values\nproduct.shape";
                var nbb_formatted_code = "product = res.prod(axis=1) * prior.values\nproduct.shape";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Finally, we normalize the rows to get a posterior distribution for each respondent.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">posterior</span> <span class="o">=</span> <span class="n">product</span> <span class="o">/</span> <span class="n">product</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[:,</span> <span class="kc">None</span><span class="p">]</span>
<span class="n">posterior</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(68075, 21)
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 34;
                var nbb_unformatted_code = "posterior = product / product.sum(axis=1)[:, None]\nposterior.shape";
                var nbb_formatted_code = "posterior = product / product.sum(axis=1)[:, None]\nposterior.shape";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>The estimated conservatism for each respondent is the mean of the posterior distribution.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">con</span> <span class="o">=</span> <span class="p">(</span><span class="n">posterior</span> <span class="o">*</span> <span class="n">ns</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">con</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(68075,)
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 35;
                var nbb_unformatted_code = "con = (posterior * ns).sum(axis=1)\ncon.shape";
                var nbb_formatted_code = "con = (posterior * ns).sum(axis=1)\ncon.shape";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>We’ll also compute the standard deviation of the posterior distribution, which I’ll use to remove respondents who did not answer enough questions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">deviations</span> <span class="o">=</span> <span class="n">ns</span> <span class="o">-</span> <span class="n">con</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">]</span>
<span class="n">var_con</span> <span class="o">=</span> <span class="p">(</span><span class="n">posterior</span> <span class="o">*</span> <span class="n">deviations</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">std_con</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">var_con</span><span class="p">)</span>
<span class="n">std_con</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(68075,)
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 36;
                var nbb_unformatted_code = "deviations = ns - con[:, None]\nvar_con = (posterior * deviations ** 2).sum(axis=1)\nstd_con = np.sqrt(var_con)\nstd_con.shape";
                var nbb_formatted_code = "deviations = ns - con[:, None]\nvar_con = (posterior * deviations ** 2).sum(axis=1)\nstd_con = np.sqrt(var_con)\nstd_con.shape";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>We can confirm that the results from the array operation is the same as the row-wise calculation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">mean</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">std_con</span><span class="p">,</span> <span class="n">std</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(True, True)
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 37;
                var nbb_unformatted_code = "np.allclose(con, mean), np.allclose(std_con, std)";
                var nbb_formatted_code = "np.allclose(con, mean), np.allclose(std_con, std)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>Here’s what the distribution of estimates looks like among the respondents.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">empiricaldist</span> <span class="kn">import</span> <span class="n">Cdf</span>

<span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">con</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">decorate</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Number of questions answered&quot;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;CDF&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/overton_irt_76_0.png" src="_images/overton_irt_76_0.png" />
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 38;
                var nbb_unformatted_code = "# the estimated values are roughly Gaussian\n\nfrom empiricaldist import Cdf\n\nCdf.from_seq(con).plot()\ndecorate(xlabel=\"Number of questions answered\", ylabel=\"CDF\")";
                var nbb_formatted_code = "# the estimated values are roughly Gaussian\n\nfrom empiricaldist import Cdf\n\nCdf.from_seq(con).plot()\ndecorate(xlabel=\"Number of questions answered\", ylabel=\"CDF\")";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">con</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6.945564025317626
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 39;
                var nbb_unformatted_code = "con.mean()";
                var nbb_formatted_code = "con.mean()";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>The distribution is roughly Gaussian, with a mean near 7 questions.
Here’s the distribution of standard deviations.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Cdf</span><span class="o">.</span><span class="n">from_seq</span><span class="p">(</span><span class="n">std_con</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="n">decorate</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Standard deviation of the posterior&quot;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;CDF&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/overton_irt_79_0.png" src="_images/overton_irt_79_0.png" />
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 40;
                var nbb_unformatted_code = "Cdf.from_seq(std_con).plot()\n\ndecorate(xlabel=\"Standard deviation of the posterior\", ylabel=\"CDF\")";
                var nbb_formatted_code = "Cdf.from_seq(std_con).plot()\n\ndecorate(xlabel=\"Standard deviation of the posterior\", ylabel=\"CDF\")";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>For most respondents (about 63,000 out of 68,000) we have enough data to estimate the number of conservative responses with standard deviation less than 3.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gss</span><span class="p">[</span><span class="s2">&quot;conservatism&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">gss</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">gss</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">std_con</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;conservatism&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="n">gss</span><span class="p">[</span><span class="s2">&quot;conservatism&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    63269.000000
mean         6.911971
std          3.251234
min          0.500713
25%          4.558568
50%          6.933004
75%          9.295529
max         14.477513
Name: conservatism, dtype: float64
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 41;
                var nbb_unformatted_code = "gss[\"conservatism\"] = pd.Series(con, gss.index)\ngss.loc[std_con > 3, \"conservatism\"] = np.nan\ngss[\"conservatism\"].describe()";
                var nbb_formatted_code = "gss[\"conservatism\"] = pd.Series(con, gss.index)\ngss.loc[std_con > 3, \"conservatism\"] = np.nan\ngss[\"conservatism\"].describe()";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
</section>
<section id="conservatism-over-time">
<h1>Conservatism Over Time<a class="headerlink" href="#conservatism-over-time" title="Permalink to this headline">#</a></h1>
<p>The following figure shows the average of these estimates for each years of the survey.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">series</span> <span class="o">=</span> <span class="n">gss</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)[</span><span class="s2">&quot;conservatism&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="nn">Input In [53],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">series</span> <span class="o">=</span> <span class="n">gss</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)[</span><span class="s2">&quot;conservatism&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="nn">File ~/anaconda3/envs/ProbablyOverthinkingIt/lib/python3.10/site-packages/pandas/core/groupby/generic.py:1338,</span> in <span class="ni">DataFrameGroupBy.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">1329</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1330</span>     <span class="c1"># if len == 1, then it becomes a SeriesGroupBy and this is actually</span>
<span class="g g-Whitespace">   </span><span class="mi">1331</span>     <span class="c1"># valid syntax, so don&#39;t raise warning</span>
<span class="g g-Whitespace">   </span><span class="mi">1332</span>     <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1333</span>         <span class="s2">&quot;Indexing with multiple keys (implicitly converted to a tuple &quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1334</span>         <span class="s2">&quot;of keys) will be deprecated, use a list instead.&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1335</span>         <span class="ne">FutureWarning</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1336</span>         <span class="n">stacklevel</span><span class="o">=</span><span class="n">find_stack_level</span><span class="p">(),</span>
<span class="g g-Whitespace">   </span><span class="mi">1337</span>     <span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1338</span> <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="nn">File ~/anaconda3/envs/ProbablyOverthinkingIt/lib/python3.10/site-packages/pandas/core/base.py:250,</span> in <span class="ni">SelectionMixin.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">    </span><span class="mi">248</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">249</span>     <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">250</span>         <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Column not found: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">251</span>     <span class="n">subset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<span class="g g-Whitespace">    </span><span class="mi">252</span>     <span class="n">ndim</span> <span class="o">=</span> <span class="n">subset</span><span class="o">.</span><span class="n">ndim</span>

<span class="ne">KeyError</span>: &#39;Column not found: conservatism&#39;
</pre></div>
</div>
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 53;
                var nbb_unformatted_code = "series = gss.groupby(\"year\")[\"conservatism\"].mean()";
                var nbb_formatted_code = "series = gss.groupby(\"year\")[\"conservatism\"].mean()";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="_images/overton_irt_84_0.png" src="_images/overton_irt_84_0.png" />
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 43;
                var nbb_unformatted_code = "plot_series_lowess(series, plot_series=True, color=\"C0\", alpha=0.7, label=\"\")\ndecorate(xlabel=\"Year of survey\", ylabel=\"Number of conservative responses\")";
                var nbb_formatted_code = "plot_series_lowess(series, plot_series=True, color=\"C0\", alpha=0.7, label=\"\")\ndecorate(xlabel=\"Year of survey\", ylabel=\"Number of conservative responses\")";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>The prevalence of conservative responses has decreased over the last 50 years.
In 1973, the average respondent chose a conservative response to 8.1 out of 15 questions; in 2021, it had fallen to 5.3.</p>
<p>There is no evidence that this trend has slowed or reversed recently.
In 2012 and 2014, it might have been above the long-term trend; in 2016 and 2018, it was below it.
And the most recent data, from 2021, is exactly on pace.</p>
</section>
<section id="are-we-polarized">
<h1>Are We Polarized?<a class="headerlink" href="#are-we-polarized" title="Permalink to this headline">#</a></h1>
<p>In current commentary, it is often taken for granted that politics in the U.S. have become more polarized.
If we take that to mean that conservatives are becoming more conservative, and liberals more liberal, that turns out not to be true.</p>
<p>The following figure shows conservatism over time, grouped by political label.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="_images/overton_irt_88_0.png" src="_images/overton_irt_88_0.png" />
<script type="application/javascript">
            setTimeout(function() {
                var nbb_cell_id = 45;
                var nbb_unformatted_code = "columns = [\"Conservative\", \"Moderate\", \"Liberal\"]\nfor column in columns:\n    plot_series_lowess(table[column], ls=line_map[column], color=polview_map[column])\n\nplt.hlines(6.8, 1974, 2021, color=\"gray\", alpha=0.5)\ndecorate(xlabel=\"Year of survey\", ylabel=\"Number of conservative responses\")\nplt.savefig(\"overton10b.jpg\", dpi=600)";
                var nbb_formatted_code = "columns = [\"Conservative\", \"Moderate\", \"Liberal\"]\nfor column in columns:\n    plot_series_lowess(table[column], ls=line_map[column], color=polview_map[column])\n\nplt.hlines(6.8, 1974, 2021, color=\"gray\", alpha=0.5)\ndecorate(xlabel=\"Year of survey\", ylabel=\"Number of conservative responses\")\nplt.savefig(\"overton10b.jpg\", dpi=600)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            </script></div>
</div>
<p>All three groups have become more liberal; however, the slopes of the lines are somewhat different.
Over this interval, conservatives have become more liberal by about 1.9 expected responses, moderates by 3.1, and liberals by 3.4.
That’s a kind of polarization in the sense that the groups moved farther apart, but not in the sense that they are moving in opposite directions.</p>
<p>In the previous figure, the horizontal line is at 6.8 responses, which was the expected level of conservatism in 1974 among people who called themselves liberal.</p>
<p>So, suppose you take a time machine back to 1974, find an average liberal, and bring them to the turn of the millennium.
Based on their responses to the fifteen questions, they would be indistinguishable from the average moderate in 2000.</p>
<p>And if you bring them to 2021, their quaint 1970s liberalism would be almost as conservative as the average conservative.</p>
</section>
<section id="appendix-the-fifteen-questions">
<h1>Appendix: The Fifteen Questions<a class="headerlink" href="#appendix-the-fifteen-questions" title="Permalink to this headline">#</a></h1>
<p>This appendix provides the wording of the fifteen questions from the General Social Survey that most distinguish liberals and conservatives, identified by topic and the GSS variable name.</p>
<ol class="simple">
<li><p>Homosexuality (homosex): What about sexual relations between two adults of the same sex–do you think it is always wrong, almost always wrong, wrong only sometimes, or not wrong at all?</p></li>
<li><p>Capital punishment (cappun): Do you favor or oppose the death penalty for persons convicted of murder?</p></li>
<li><p>Legal cannabis (grass): Do you think the use of marijuana should be made legal or not?</p></li>
<li><p>Abortion (abany): Please tell me whether or not you think it should be possible for a pregnant woman to obtain a legal abortion if the woman wants it for any reason?</p></li>
<li><p>Prayer in public schools (prayer): The United States Supreme Court has ruled that no state or local government may require the reading of the Lord’s Prayer or Bible verses in public schools. What are your views on this–do you approve or disapprove of the court ruling?</p></li>
<li><p>Premarital sex (premarsx): There’s been a lot of discussion about the way morals and attitudes about sex are changing in this country. If a man and woman have sex relations before marriage, do you think it is always wrong, almost always wrong, wrong only sometimes, or not wrong at all?</p></li>
<li><p>Divorce (divlaw): Should divorce in this country be easier or more difficult to obtain than it is now?</p></li>
<li><p>Spending on welfare (natfare) and the environment (natenvir): We are faced with many problems in this country, none of which can be solved easily or inexpensively. I’m going to name some of these problems, and for each one I’d like you to tell me whether you think we’re spending too much money on it, too little money, or about the right amount.</p></li>
</ol>
<ul class="simple">
<li><p>Welfare</p></li>
<li><p>Improving and protecting the environment</p></li>
</ul>
<ol class="simple">
<li><p>Pornography (pornlaw): Which of these statements comes closest to your feelings about pornography laws?</p></li>
</ol>
<ul class="simple">
<li><p>There should be laws against the distribution of pornography whatever the age.</p></li>
<li><p>There should be laws against the distribution of pornography to persons under 18.</p></li>
<li><p>There should be no laws forbidding the distribution of pornography.</p></li>
</ul>
<ol class="simple">
<li><p>Open housing law (racopen): Suppose there is a community-wide vote on the general housing issue. There are two possible laws to vote on:</p></li>
</ol>
<ul>
<li><p>One law says that a homeowner can decide for himself whom to sell his house to, even if he prefers not to sell to [people of a particular race].</p></li>
<li><p>The second law says that a homeowner cannot refuse to sell to someone because of their race or color.</p>
<p>Which law would you vote for?</p>
</li>
</ul>
<ol class="simple">
<li><p>Assisted suicide (letdie1): When a person has a disease that cannot be cured, do you think Doctors should be allowed by law to end the patient’s life by some painless means if the patient and his family request it?</p></li>
<li><p>Women in politics (fepol): Tell me if you agree or disagree with this statement:  Most men are better suited emotionally for politics than are most women.</p></li>
<li><p>Gun control (gunlaw): Would you favor or oppose a law which would require a person to obtain a police permit before he or she could buy a gun?</p></li>
<li><p>Sex education (sexeduc): Would you be for or against sex education in the public schools?</p></li>
</ol>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="README.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Probably Overthinking It</p>
        </div>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Allen B. Downey<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>